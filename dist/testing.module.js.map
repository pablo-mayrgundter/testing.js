{"version":3,"file":"testing.module.js","sources":["../testing.js"],"sourcesContent":["function assertTrue(cond, msg) {\n  if (!cond) {\n    throw new Error(msg || `Condition must be true: ${cond}`);\n  }\n  return true;\n}\n\n\nfunction assertFalse(cond, msg) {\n  if (cond) {\n    throw new Error(msg || `Condition must be false: ${cond}`);\n  }\n  return false;\n}\n\n\nfunction assertEquals(expected, actual, msg) {\n  if (expected !== actual) {\n    throw new Error(msg || `expected(${expected}) != actual(${actual}).`);\n  }\n  return actual;\n}\n\n\nfunction assertFail(func, msg) {\n  if (typeof func !== 'function') {\n    throw new Error('Expected test condition to be a function, got: ' + (typeof func));\n  }\n  try {\n    func();\n  } catch (e) {\n    return func;\n  }\n  throw new Error(msg || 'Function should throw error.');\n}\n\n\nfunction assertFinite(num, msg) {\n  if (!Number.isFinite(num)) {\n    throw new Error(msg || `Is not a number: ${num}`);\n  }\n  return num;\n}\n\n\nfunction assertInRange(num, min, max, msg) {\n  assertFinite(num);\n  if (num < min || num > max) {\n    throw new Error(msg || `${num} is not in range (${min}, ${max}))`);\n  }\n  return num;\n}\n\n\nfunction assertDefined(val) {\n  if (typeof val == 'undefined') {\n    throw new Error('Value undefined')\n  }\n  return val;\n}\n\n\nfunction assertUndefined(val) {\n  if (typeof val !== 'undefined') {\n    throw new Error('Value defined')\n  }\n  return val;\n}\n\n\nclass Testing {\n  constructor() {\n    this.tests = [];\n    this.asserts = 0;\n    this.skipped = 0;\n  }\n\n\n  run() {\n    let ok = 0;\n    let fail = 0;\n    for (let i in this.tests) {\n      const test = this.tests[i];\n      const description = test[0];\n      const fn = test[1];\n      try {\n        fn();\n        ok++;\n      } catch (e) {\n        console.error(`FAIL: ${description} `, e.stack);\n        fail++;\n      }\n    }\n    if (this.skipped > 0) {\n      console.log(`TOTAL OK: ${ok}, FAIL: ${fail}, SKIPPED: ${this.skipped}, ASSERTS: ${this.asserts}`);\n    } else {\n      console.log(`TOTAL OK: ${ok}, FAIL: ${fail}, ASSERTS: ${this.asserts}`);\n    }\n  }\n\n\n  add(description, fn, onlyThisOne = false) {\n    if (onlyThisOne) {\n      this.tests.length = 0;\n    }\n    this.tests.push([description, fn]);\n  }\n\n\n  skip(description, fn, onlyThisOne = false) {\n    this.skipped++;\n  }\n\n\n  assertTrue(cond, msg) {\n    this.asserts++;\n    assertTrue(cond, msg);\n  }\n\n\n  assertFalse(cond, msg) {\n    this.asserts++;\n    assertFalse(cond, msg);\n  }\n\n\n  assertEquals(expected, actual, msg) {\n    this.asserts++;\n    assertEquals(expected, actual, msg);\n  }\n\n\n  assertFinite(num, msg) {\n    this.asserts++;\n    assertFinite(num, msg);\n  }\n\n\n  assertInRange(num, min, max, msg) {\n    this.asserts++;\n    assertInRange(num, min, max, msg);\n  }\n\n\n  assertFail(func, msg) {\n    this.asserts++;\n    assertFail(func, msg);\n    try {\n      func();\n      throw new Error(msg || 'Function should throw error.');\n    } catch (e) { /* expected */ }\n  }\n\n\n  assertDefined(num, msg) {\n    this.asserts++;\n    assertDefined(num, msg);\n  }\n\n\n  assertUndefined(num, msg) {\n    this.asserts++;\n    assertUndefined(num, msg);\n  }\n}\n\n\nexport {\n  Testing as default,\n  assertTrue,\n  assertFalse,\n  assertEquals,\n  assertFail,\n  assertFinite,\n  assertInRange,\n  assertDefined,\n  assertUndefined\n}\n"],"names":[],"mappings":"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"}